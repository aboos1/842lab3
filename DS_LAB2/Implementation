Send(message):
	if message is a group msg
		multicast it
		put in the send_queue()
		start timer
	else:
		send it
			
Receive(message):
	If ACK:
		Process(ACK)
	else:
		if not src
			check hold_back_queue
			if not in
				add to hold_back_queue
				update ACK_Map
				send_multicast ACK
				[start timer]
				
Process(ACK)
	update ACK_Map
	check whether OK to deliver
		if yes
			if (src)
				clear ack_map
				stop timer
				clear send_queue
			else
				send to deliver_queue
				clear map
				stop timer
		else
			not deliver
		 